{"version":3,"file":"ff-overlay.umd.js.map","sources":["ng://ff-overlay/lib/ff-overlay.component.ts","ng://ff-overlay/lib/ff-overlay.service.ts","ng://ff-overlay/lib/ff-overlay.module.ts"],"sourcesContent":["import {Component} from '@angular/core';\n\n@Component({\n  selector: 'ff-overlay',\n  template: ``,\n  styles: [`:host {\n    pointer-events: none;\n    display: block;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 1000;\n    width: 100%;\n    height: 100%;\n  }\n\n  :host > * {\n    pointer-events: auto;\n  }`]\n})\nexport class FFOverlayComponent {\n}\n","import {\n  ApplicationRef,\n  ComponentFactoryResolver,\n  EmbeddedViewRef,\n  Injectable,\n  Injector,\n  OnDestroy,\n  Renderer2,\n  RendererFactory2\n} from '@angular/core';\nimport {FFOverlayComponent} from './ff-overlay.component';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FFOverlayService implements OnDestroy {\n  private _overlay: any;\n  private renderer: Renderer2;\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private appRef: ApplicationRef,\n    private injector: Injector,\n    rendererFactory: RendererFactory2\n  ) {\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n\n  private appendComponent(component: any, target?: any) {\n    const componentRef = this.componentFactoryResolver\n      .resolveComponentFactory(component)\n      .create(this.injector);\n\n    this.appRef.attachView(componentRef.hostView);\n\n    const domElem = (componentRef.hostView as EmbeddedViewRef<any>)\n      .rootNodes[0] as HTMLElement;\n    if (target) {\n      this.renderer.appendChild(target, domElem);\n    } else {\n      this.renderer.appendChild(document.body, domElem);\n    }\n    return {\n      componentRef, destroy: () => {\n        this.appRef.detachView(componentRef.hostView);\n        componentRef.destroy();\n      }\n    };\n  }\n\n  public getOverlay() {\n    if (!this._overlay) {\n      this.init();\n    }\n    return this._overlay.componentRef.hostView.rootNodes[0];\n  }\n\n  public appendChild(domElement) {\n    this.renderer.appendChild(this.getOverlay(), domElement);\n  }\n\n  public removeChild(domElement) {\n    this.renderer.removeChild(this.getOverlay(), domElement);\n    if (!this.getOverlay().children.length) {\n      this.destroy();\n    }\n  }\n\n  public init(target?: any) {\n    if (!this._overlay) {\n      this._overlay = this.appendComponent(FFOverlayComponent, target);\n    }\n  }\n\n  public destroy() {\n    this._overlay && this._overlay.destroy();\n    this._overlay = null;\n  }\n\n  ngOnDestroy(): void {\n    this.destroy();\n  }\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {FFOverlayComponent} from './ff-overlay.component';\nimport {FFOverlayService} from './ff-overlay.service';\n\n@NgModule({\n  declarations: [FFOverlayComponent],\n  imports: [],\n  exports: [],\n  entryComponents: [FFOverlayComponent]\n})\nexport class FFOverlayModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: FFOverlayModule,\n      providers: [FFOverlayService]\n    };\n  }\n}\n"],"names":["Component","Injectable","ComponentFactoryResolver","ApplicationRef","Injector","RendererFactory2","NgModule"],"mappings":"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"}
