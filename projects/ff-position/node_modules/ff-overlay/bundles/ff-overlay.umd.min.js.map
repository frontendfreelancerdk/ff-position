{"version":3,"sources":["ng://ff-overlay/lib/ff-overlay.component.ts","ng://ff-overlay/lib/ff-overlay.service.ts","ng://ff-overlay/lib/ff-overlay.module.ts"],"names":["FFOverlayComponent","Component","args","selector","template","FFOverlayService","componentFactoryResolver","appRef","injector","rendererFactory","this","renderer","createRenderer","prototype","appendComponent","component","target","_this","componentRef","resolveComponentFactory","create","attachView","hostView","domElem","rootNodes","appendChild","document","body","destroy","detachView","getOverlay","_overlay","init","domElement","removeChild","children","length","ngOnDestroy","Injectable","providedIn","ComponentFactoryResolver","ApplicationRef","Injector","RendererFactory2","FFOverlayModule","forRoot","ngModule","providers","NgModule","declarations","imports","exports","entryComponents"],"mappings":"kQAAA,IAAAA,EAAA,WAEA,SAAAA,KAmBA,2BAnBCC,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,aACVC,SAAU,WACD,+NAgBXJ,EArBA,GCAAK,EAAA,WAmBE,SAAAA,EACUC,EACAC,EACAC,EACRC,GAHQC,KAAAJ,yBAAAA,EACAI,KAAAH,OAAAA,EACAG,KAAAF,SAAAA,EAGRE,KAAKC,SAAWF,EAAgBG,eAAe,KAAM,aAG/CP,EAAAQ,UAAAC,gBAAR,SAAwBC,EAAgBC,GAAxC,IAAAC,EAAAP,KACQQ,EAAeR,KAAKJ,yBACvBa,wBAAwBJ,GACxBK,OAAOV,KAAKF,UAEfE,KAAKH,OAAOc,WAAWH,EAAaI,cAE9BC,EAAWL,EAAqB,SACnCM,UAAU,GAMb,OALIR,EACFN,KAAKC,SAASc,YAAYT,EAAQO,GAElCb,KAAKC,SAASc,YAAYC,SAASC,KAAMJ,GAEpC,CACLL,aAAYA,EAAEU,QAAO,WACnBX,EAAKV,OAAOsB,WAAWX,EAAaI,UACpCJ,EAAaU,aAKZvB,EAAAQ,UAAAiB,WAAP,WAIE,OAHKpB,KAAKqB,UACRrB,KAAKsB,OAEAtB,KAAKqB,SAASb,aAAaI,SAASE,UAAU,IAGhDnB,EAAAQ,UAAAY,YAAP,SAAmBQ,GACjBvB,KAAKC,SAASc,YAAYf,KAAKoB,aAAcG,IAGxC5B,EAAAQ,UAAAqB,YAAP,SAAmBD,GACjBvB,KAAKC,SAASuB,YAAYxB,KAAKoB,aAAcG,GACxCvB,KAAKoB,aAAaK,SAASC,QAC9B1B,KAAKkB,WAIFvB,EAAAQ,UAAAmB,KAAP,SAAYhB,GACLN,KAAKqB,WACRrB,KAAKqB,SAAWrB,KAAKI,gBAAgBd,EAAoBgB,KAItDX,EAAAQ,UAAAe,QAAP,WACElB,KAAKqB,UAAYrB,KAAKqB,SAASH,UAC/BlB,KAAKqB,SAAW,MAGlB1B,EAAAQ,UAAAwB,YAAA,WACE3B,KAAKkB,+BApERU,EAAAA,WAAUpC,KAAA,CAAC,CACVqC,WAAY,oDAXZC,EAAAA,gCADAC,EAAAA,sBAIAC,EAAAA,gBAGAC,EAAAA,4OARF,GCAAC,EAAA,WAIA,SAAAA,KAaA,OANSA,EAAAC,QAAP,WACE,MAAO,CACLC,SAAUF,EACVG,UAAW,CAAC1C,yBAVjB2C,EAAAA,SAAQ9C,KAAA,CAAC,CACR+C,aAAc,CAACjD,GACfkD,QAAS,GACTC,QAAS,GACTC,gBAAiB,CAACpD,OASpB4C,EAjBA","sourcesContent":["import {Component} from '@angular/core';\n\n@Component({\n  selector: 'ff-overlay',\n  template: ``,\n  styles: [`:host {\n    pointer-events: none;\n    display: block;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 1000;\n    width: 100%;\n    height: 100%;\n  }\n\n  :host > * {\n    pointer-events: auto;\n  }`]\n})\nexport class FFOverlayComponent {\n}\n","import {\n  ApplicationRef,\n  ComponentFactoryResolver,\n  EmbeddedViewRef,\n  Injectable,\n  Injector,\n  OnDestroy,\n  Renderer2,\n  RendererFactory2\n} from '@angular/core';\nimport {FFOverlayComponent} from './ff-overlay.component';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FFOverlayService implements OnDestroy {\n  private _overlay: any;\n  private renderer: Renderer2;\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private appRef: ApplicationRef,\n    private injector: Injector,\n    rendererFactory: RendererFactory2\n  ) {\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n\n  private appendComponent(component: any, target?: any) {\n    const componentRef = this.componentFactoryResolver\n      .resolveComponentFactory(component)\n      .create(this.injector);\n\n    this.appRef.attachView(componentRef.hostView);\n\n    const domElem = (componentRef.hostView as EmbeddedViewRef<any>)\n      .rootNodes[0] as HTMLElement;\n    if (target) {\n      this.renderer.appendChild(target, domElem);\n    } else {\n      this.renderer.appendChild(document.body, domElem);\n    }\n    return {\n      componentRef, destroy: () => {\n        this.appRef.detachView(componentRef.hostView);\n        componentRef.destroy();\n      }\n    };\n  }\n\n  public getOverlay() {\n    if (!this._overlay) {\n      this.init();\n    }\n    return this._overlay.componentRef.hostView.rootNodes[0];\n  }\n\n  public appendChild(domElement) {\n    this.renderer.appendChild(this.getOverlay(), domElement);\n  }\n\n  public removeChild(domElement) {\n    this.renderer.removeChild(this.getOverlay(), domElement);\n    if (!this.getOverlay().children.length) {\n      this.destroy();\n    }\n  }\n\n  public init(target?: any) {\n    if (!this._overlay) {\n      this._overlay = this.appendComponent(FFOverlayComponent, target);\n    }\n  }\n\n  public destroy() {\n    this._overlay && this._overlay.destroy();\n    this._overlay = null;\n  }\n\n  ngOnDestroy(): void {\n    this.destroy();\n  }\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {FFOverlayComponent} from './ff-overlay.component';\nimport {FFOverlayService} from './ff-overlay.service';\n\n@NgModule({\n  declarations: [FFOverlayComponent],\n  imports: [],\n  exports: [],\n  entryComponents: [FFOverlayComponent]\n})\nexport class FFOverlayModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: FFOverlayModule,\n      providers: [FFOverlayService]\n    };\n  }\n}\n"]}