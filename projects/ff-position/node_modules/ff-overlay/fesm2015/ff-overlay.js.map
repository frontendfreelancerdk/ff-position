{"version":3,"file":"ff-overlay.js.map","sources":["ng://ff-overlay/lib/ff-overlay.component.ts","ng://ff-overlay/lib/ff-overlay.service.ts","ng://ff-overlay/lib/ff-overlay.module.ts"],"sourcesContent":["import {Component} from '@angular/core';\n\n@Component({\n  selector: 'ff-overlay',\n  template: ``,\n  styles: [`:host {\n    pointer-events: none;\n    display: block;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 1000;\n    width: 100%;\n    height: 100%;\n  }\n\n  :host > * {\n    pointer-events: auto;\n  }`]\n})\nexport class FFOverlayComponent {\n}\n","import {\n  ApplicationRef,\n  ComponentFactoryResolver,\n  EmbeddedViewRef,\n  Injectable,\n  Injector,\n  OnDestroy,\n  Renderer2,\n  RendererFactory2\n} from '@angular/core';\nimport {FFOverlayComponent} from './ff-overlay.component';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FFOverlayService implements OnDestroy {\n  private _overlay: any;\n  private renderer: Renderer2;\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private appRef: ApplicationRef,\n    private injector: Injector,\n    rendererFactory: RendererFactory2\n  ) {\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n\n  private appendComponent(component: any, target?: any) {\n    const componentRef = this.componentFactoryResolver\n      .resolveComponentFactory(component)\n      .create(this.injector);\n\n    this.appRef.attachView(componentRef.hostView);\n\n    const domElem = (componentRef.hostView as EmbeddedViewRef<any>)\n      .rootNodes[0] as HTMLElement;\n    if (target) {\n      this.renderer.appendChild(target, domElem);\n    } else {\n      this.renderer.appendChild(document.body, domElem);\n    }\n    return {\n      componentRef, destroy: () => {\n        this.appRef.detachView(componentRef.hostView);\n        componentRef.destroy();\n      }\n    };\n  }\n\n  public getOverlay() {\n    if (!this._overlay) {\n      this.init();\n    }\n    return this._overlay.componentRef.hostView.rootNodes[0];\n  }\n\n  public appendChild(domElement) {\n    this.renderer.appendChild(this.getOverlay(), domElement);\n  }\n\n  public removeChild(domElement) {\n    this.renderer.removeChild(this.getOverlay(), domElement);\n    if (!this.getOverlay().children.length) {\n      this.destroy();\n    }\n  }\n\n  public init(target?: any) {\n    if (!this._overlay) {\n      this._overlay = this.appendComponent(FFOverlayComponent, target);\n    }\n  }\n\n  public destroy() {\n    this._overlay && this._overlay.destroy();\n    this._overlay = null;\n  }\n\n  ngOnDestroy(): void {\n    this.destroy();\n  }\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {FFOverlayComponent} from './ff-overlay.component';\nimport {FFOverlayService} from './ff-overlay.service';\n\n@NgModule({\n  declarations: [FFOverlayComponent],\n  imports: [],\n  exports: [],\n  entryComponents: [FFOverlayComponent]\n})\nexport class FFOverlayModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: FFOverlayModule,\n      providers: [FFOverlayService]\n    };\n  }\n}\n"],"names":[],"mappings":"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"}
