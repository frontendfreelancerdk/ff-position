{"version":3,"file":"ff-overlay.js.map","sources":["ng://ff-overlay/lib/ff-overlay.component.ts","ng://ff-overlay/lib/ff-overlay.service.ts","ng://ff-overlay/lib/ff-overlay.module.ts"],"sourcesContent":["import {Component} from '@angular/core';\n\n@Component({\n  selector: 'ff-overlay',\n  template: ``,\n  styles: [`:host {\n    pointer-events: none;\n    display: block;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 1000;\n    width: 100%;\n    height: 100%;\n  }\n\n  :host > * {\n    pointer-events: auto;\n  }`]\n})\nexport class FFOverlayComponent {\n}\n","import {\n  ApplicationRef,\n  ComponentFactoryResolver,\n  EmbeddedViewRef,\n  Injectable,\n  Injector,\n  OnDestroy,\n  Renderer2,\n  RendererFactory2\n} from '@angular/core';\nimport {FFOverlayComponent} from './ff-overlay.component';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FFOverlayService implements OnDestroy {\n  private _overlay: any;\n  private renderer: Renderer2;\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private appRef: ApplicationRef,\n    private injector: Injector,\n    rendererFactory: RendererFactory2\n  ) {\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n\n  private appendComponent(component: any, target?: any) {\n    const componentRef = this.componentFactoryResolver\n      .resolveComponentFactory(component)\n      .create(this.injector);\n\n    this.appRef.attachView(componentRef.hostView);\n\n    const domElem = (componentRef.hostView as EmbeddedViewRef<any>)\n      .rootNodes[0] as HTMLElement;\n    if (target) {\n      this.renderer.appendChild(target, domElem);\n    } else {\n      this.renderer.appendChild(document.body, domElem);\n    }\n    return {\n      componentRef, destroy: () => {\n        this.appRef.detachView(componentRef.hostView);\n        componentRef.destroy();\n      }\n    };\n  }\n\n  public getOverlay() {\n    if (!this._overlay) {\n      this.init();\n    }\n    return this._overlay.componentRef.hostView.rootNodes[0];\n  }\n\n  public appendChild(domElement) {\n    this.renderer.appendChild(this.getOverlay(), domElement);\n  }\n\n  public removeChild(domElement) {\n    this.renderer.removeChild(this.getOverlay(), domElement);\n    if (!this.getOverlay().children.length) {\n      this.destroy();\n    }\n  }\n\n  public init(target?: any) {\n    if (!this._overlay) {\n      this._overlay = this.appendComponent(FFOverlayComponent, target);\n    }\n  }\n\n  public destroy() {\n    this._overlay && this._overlay.destroy();\n    this._overlay = null;\n  }\n\n  ngOnDestroy(): void {\n    this.destroy();\n  }\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {FFOverlayComponent} from './ff-overlay.component';\nimport {FFOverlayService} from './ff-overlay.service';\n\n@NgModule({\n  declarations: [FFOverlayComponent],\n  imports: [],\n  exports: [],\n  entryComponents: [FFOverlayComponent]\n})\nexport class FFOverlayModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: FFOverlayModule,\n      providers: [FFOverlayService]\n    };\n  }\n}\n"],"names":[],"mappings":"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"}
